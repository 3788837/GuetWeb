<!doctype html>
<html lang="zh">

	<head>
		<title>Home</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<!-- VENDOR CSS -->
		<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
		<link rel="stylesheet" href="assets/vendor/chartist/css/chartist-custom.css">
		<!-- MAIN CSS -->
		<link rel="stylesheet" href="assets/css/main.css">
		<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
		<link rel="stylesheet" href="assets/css/demo.css">
		<!-- GOOGLE FONTS -->
		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
		<!-- ICONS -->
		<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
		<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">
	</head>

	<body>
		<!-- WRAPPER -->
		<div id="wrapper">
			<!-- NAVBAR -->
			<nav class="navbar navbar-default navbar-fixed-top">
				<div class="brand">
					<a href="index.html"><img src="assets/img/logo-dark.png" alt="Klorofil Logo" class="img-responsive logo"></a>
				</div>
				<div class="container-fluid">
					<div class="navbar-btn">
						<button type="button" class="btn-toggle-fullwidth"><i class="lnr lnr-arrow-left-circle"></i></button>
					</div>
					<!--<div class="navbar-btn navbar-btn-right">
						<a class="btn btn-success update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
					</div>-->
					<div id="navbar-menu">
						<ul class="nav navbar-nav navbar-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle icon-menu" data-toggle="dropdown">
									<i class="lnr lnr-alarm"></i>
									<span class="badge bg-danger">5</span>
								</a>
								<ul class="dropdown-menu notifications">
									<li>
										<a href="#" class="notification-item"><span class="dot bg-warning"></span>System space is almost full</a>
									</li>
									<li>
										<a href="#" class="notification-item"><span class="dot bg-danger"></span>You have 9 unfinished tasks</a>
									</li>
									<li>
										<a href="#" class="notification-item"><span class="dot bg-success"></span>Monthly report is available</a>
									</li>
									<li>
										<a href="#" class="notification-item"><span class="dot bg-warning"></span>Weekly meeting in 1 hour</a>
									</li>
									<li>
										<a href="#" class="notification-item"><span class="dot bg-success"></span>Your request has been approved</a>
									</li>
									<li>
										<a href="#" class="more">See all notifications</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="lnr lnr-question-circle"></i> <span>帮助中心</span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
								<ul class="dropdown-menu">
									<li>
										<a href="#">Q1</a>
									</li>
									<li>
										<a href="#">Q2</a>
									</li>
									<li>
										<a href="#">Q3</a>
									</li>
									<li>
										<a href="#">Q4</a>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="assets/img/user.png" class="img-circle" alt="Avatar"> <span id="user_name"></span> <i class="icon-submenu lnr lnr-chevron-down"></i></a>
								<ul class="dropdown-menu">
									<li>
										<a href="#" onclick="Go(3)"><i class="lnr lnr-user"></i> <span>账户信息</span></a>
									</li>
									<!-- <li><a href="#"><i class="lnr lnr-envelope"></i> <span>信息</span></a></li> -->
									<li>
										<a href="#"><i class="lnr lnr-cog"></i> <span>账号设置</span></a>
									</li>
									<li>
										<a href="../logou.php"><i class="lnr lnr-exit"></i> <span>退出</span></a>
									</li>
								</ul>
							</li>
							<!-- <li>
							<a class="update-pro" href="#downloads/klorofil-pro-bootstrap-admin-dashboard-template/?utm_source=klorofil&utm_medium=template&utm_campaign=KlorofilPro" title="Upgrade to Pro" target="_blank"><i class="fa fa-rocket"></i> <span>UPGRADE TO PRO</span></a>
						</li> -->
						</ul>
					</div>
				</div>
			</nav>
			<!-- END NAVBAR -->
			<!-- LEFT SIDEBAR -->
			<div id="sidebar-nav" class="sidebar">
				<div class="sidebar-scroll">
					<nav>
						<ul class="nav">
							<li>
								<a href="#" onclick="Go(0)" id "btn_index"><i class="lnr lnr-home"></i> <span>首页</span></a>
							</li>
							<li>
								<a href="#" onclick="Go(1)" id="btn_apply"><i class="lnr lnr-code"></i> <span>填写入部申请</span></a>
							</li>
							<!-- <li><a href="charts.html" class=""><i class="lnr lnr-chart-bars"></i> <span>Charts</span></a></li>
						<li><a href="panels.html" class=""><i class="lnr lnr-cog"></i> <span>Panels</span></a></li>
						<li><a href="notifications.html" class=""><i class="lnr lnr-alarm"></i> <span>Notifications</span></a></li>
						<li>
							<a href="#subPages" data-toggle="collapse" class="collapsed"><i class="lnr lnr-file-empty"></i> <span>Pages</span> <i class="icon-submenu lnr lnr-chevron-left"></i></a>
							<div id="subPages" class="collapse ">
								<ul class="nav">
									<li><a href="page-profile.html" class="">Profile</a></li>
									<li><a href="page-login.html" class="">Login</a></li>
									<li><a href="page-lockscreen.html" class="">Lockscreen</a></li>
								</ul>
							</div>
						</li>
						<li><a href="tables.html" class=""><i class="lnr lnr-dice"></i> <span>Tables</span></a></li>
						<li><a href="typography.html" class=""><i class="lnr lnr-text-format"></i> <span>Typography</span></a></li>
						<li><a href="icons.html" class=""><i class="lnr lnr-linearicons"></i> <span>Icons</span></a></li> -->
						</ul>
					</nav>
				</div>
			</div>
			<!-- END LEFT SIDEBAR -->
			<!-- MAIN -->
			<div class="main">
				<!-- MAIN CONTENT -->
				<div class="main-content">
					<div id="index" style="width: 600px;height:400px;">
						<!--<div class="jumbotron">
						  <h1>Hello, world!</h1>
						  <p>...</p>
						  <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>
						</div>	-->
					</div>
					<div id="apply">
						<div class="panel panel-default">
							<div class="panel-heading">欢迎申请加入软件部，请认真仔细地填写入部申请表</div>
							<div class="panel-body">
								<label for="name" style="text-align: center;">招新群：315404595</label>
								<div class="input-group input-group-lg">
									<span class="input-group-addon">姓名</span>
									<input type='text' name='name' id='name' class='intxt form-control' value='' />
								</div>

								<div class="input-group input-group-lg">
									<span class="input-group-addon">手机号码</span>
									<input type='text' name='iphone' id='iphone' class='intxt intxt form-control' value='' />
								</div>

								<div class="input-group input-group-lg">
									<span class="input-group-addon">学号</span>
									<input type='text' name='stuNumber' id='stuNumber' class='intxt form-control' value='' />
								</div>

								<div class="input-group input-group-lg">
									<span class="input-group-addon">专业</span>
									<input type='text' name='zhuanye' id='zhuanye' class='intxt form-control' value='' />
								</div>

								<div class="input-group input-group-lg">
									<span class="input-group-addon">QQ</span>
									<input type='text' name='qq' id='qq' class='intxt form-control' value='' />
								</div>

								<div class="input-group input-group-lg">
									<span class="input-group-addon">家乡</span>
									<input type='text' name='home' id='home' class='intxt form-control' value='' />
								</div>

								<div class="form-group">
									<label for="name">个人简介：</label>
									<textarea name='profile' id='profile' class="form-control"></textarea>
								</div>

								<div class="form-group">
									<label for="name">曾任何职务，获何种奖励：</label>
									<textarea name='profile1' id='profile1' class="form-control"></textarea>
								</div>

								<div class="form-group">
									<label for="name">对软件部的理解：</label>
									<textarea name='profile2' id='profile2' class="form-control"></textarea>
								</div>

								<div class="form-group">
									<label for="name">学习意向及学习设想：</label>
									<textarea name='profile3' id='profile3' class="form-control"></textarea>
								</div>

								<!--<div class="form-group">
									<label for="inputfile">非美颜自拍或证件照(若不支持所提交图片格式，可留空此项)：</label>
									<input type='file' name='zhaopian' id='zhaopian' />
								</div>-->
								<div class="form-group">
									<div class="col-sm-offset-2 col-sm-10">
										<button type="button" class="btn btn-primary btn-lg btn-block" onclick="Go(2)">提交</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="mymodal" name="change_info">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">
					     			<span aria-hidden="true">×</span><span class="sr-only">Close</span>
					    			</button>
									<h4 class="modal-title">修改个人信息</h4>
								</div>
								<div class="modal-body">
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">名字</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_name">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">学号</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_studentnumber">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">邮箱</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_email">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">手机号</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_phone">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">QQ </span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_qq">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">专业</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_major">
									</div>
									<div class="input-group">
										<span class="input-group-addon" id="basic-addon1">家乡</span>
										<input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" id="change_hometown">
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
									<button type="button" class="btn btn-primary" onclick="Go(4)">保存</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="clearfix"></div>
			<footer>
				<div class="container-fluid">
					<p class="copyright">Copyright &copy; 校基地软件部 薛荣悦 .
						<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=3788837&site=qq&menu=yes">联系我</a>
					</p>
				</div>
			</footer>
		</div>
		<!-- END WRAPPER -->
		<!-- Javascript -->
		<script src="assets/vendor/jquery/jquery.min.js"></script>
		<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
		<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
		<script src="assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>
		<script src="assets/vendor/chartist/js/chartist.min.js"></script>
		<script src="assets/scripts/klorofil-common.js"></script>
		<script src="../js/echarts.min.js"></script>
		<script>
			$(document).ready(GetSession()); //浏览器加载完成执行函数
			$(document).ready(Go(5)); 
			
			$(function() {
				var data, options;

				// headline charts
				data = {
					labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
					series: [
						[23, 29, 24, 40, 25, 24, 35],
						[14, 25, 18, 34, 29, 38, 44],
					]
				};

				options = {
					height: 300,
					showArea: true,
					showLine: false,
					showPoint: false,
					fullWidth: true,
					axisX: {
						showGrid: false
					},
					lineSmooth: false,
				};

				new Chartist.Line('#headline-chart', data, options);

				// visits trend charts
				data = {
					labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
					series: [{
						name: 'series-real',
						data: [200, 380, 350, 320, 410, 450, 570, 400, 555, 620, 750, 900],
					}, {
						name: 'series-projection',
						data: [240, 350, 360, 380, 400, 450, 480, 523, 555, 600, 700, 800],
					}]
				};

				options = {
					fullWidth: true,
					lineSmooth: false,
					height: "270px",
					low: 0,
					high: 'auto',
					series: {
						'series-projection': {
							showArea: true,
							showPoint: false,
							showLine: false
						},
					},
					axisX: {
						showGrid: false,

					},
					axisY: {
						showGrid: false,
						onlyInteger: true,
						offset: 0,
					},
					chartPadding: {
						left: 20,
						right: 20
					}
				};

				new Chartist.Line('#visits-trends-chart', data, options);

				// visits chart
				data = {
					labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
					series: [
						[6384, 6342, 5437, 2764, 3958, 5068, 7654]
					]
				};

				options = {
					height: 300,
					axisX: {
						showGrid: false
					},
				};

				new Chartist.Bar('#visits-chart', data, options);

				// real-time pie chart
				var sysLoad = $('#system-load').easyPieChart({
					size: 130,
					barColor: function(percent) {
						return "rgb(" + Math.round(200 * percent / 100) + ", " + Math.round(200 * (1.1 - percent / 100)) + ", 0)";
					},
					trackColor: 'rgba(245, 245, 245, 0.8)',
					scaleColor: false,
					lineWidth: 5,
					lineCap: "square",
					animate: 800
				});

				var updateInterval = 3000; // in milliseconds

				setInterval(function() {
					var randomVal;
					randomVal = getRandomInt(0, 100);

					sysLoad.data('easyPieChart').update(randomVal);
					sysLoad.find('.percent').text(randomVal);
				}, updateInterval);

				function getRandomInt(min, max) {
					return Math.floor(Math.random() * (max - min + 1)) + min;
				}

			});

			//判断session
			function GetSession() {
				$("#apply").hide();
				$("#index").show();
				$("#changes_info").hide(); //div隐藏显示
				$.ajax({
					type: "POST",
					url: "../login_judge.php",
					dataType: "json",
					data: {
						"result": "test"
					},
					success: function(response) {
						if(response.msg == "失败！") {
							alert("还没有登陆，请重新登陆！");
							window.location.href = "../index.html";
						} else {
							$("#user_name").html("亲爱的:" + response.studentnumber);
							//$("#user_name").html("亲爱的:"+response.name);
						}
					},
					error: function(err) {
						alert("登陆异常,请联系管理员！");
						window.location.href = "../index.html";
					}
				});
			}

			//go控制div显示隐藏 start
			function Go(n) {
				switch(n) {
					case 0:
						$("#apply").hide();
						$("#index").show();
						//$("#changes_info").hide();
						break;
					case 1:
						$("#apply").show();
						$("#index").hide();
						//$("#changes_info").hide();
						break;
					case 2: //报名表提交
						{
							var data = {
								"n": "2",
								"name": $("#name").val(),
								"iphone": $("#iphone").val(),
								"stuNumber": $("#stuNumber").val(),
								"zhuanye": $("#zhuanye").val(),
								"qq": $("#qq").val(),
								"home": $("#home").val(),
								"profile": $("#profile").val(),
								"profile1": $("#profile1").val(),
								"profile2": $("#profile2").val(),
								"profile3": $("#profile3").val()
							};
							$.ajax({
								type: "POST",
								dataType: "json",
								url: "php_method.php",
								data: data,
								success: function(response) {
									alert(response);
								},
								error: function() {
									alert(response);
								}
							})
						}
					case 3:
						$("#apply").hide();
						$("#index").hide();
						$("#mymodal").modal("toggle");
						break;
					case 4: //修改个人信息
						{
							var data = {
								"n":"4",
								"name": $("#change_name").val(),
								"studentnumber": $("#change_studentnumber").val(),
								"email": $("#change_email").val(),
								"phone": $("#change_phone").val(),
								"qq": $("#change_qq").val(),
								"major": $("#change_major").val(),
								"hometown": $("#change_hometown").val()
							};
							$.ajax({
								type: "POST",
								dataType: "json",
								url: "php_method.php",
								data: data,
								success: function (response){
									alert(response.msg);
								},
								error: function (err){
									alert(err.msg);
								}
							})
						}
					case 5:  //显示修改页信息
						{
							$.ajax({
								type: "POST",
								dataType: "json",
								url: "php_method.php",
								data:{
									"n": "5"
								},
								success: function (response){
									$("#change_name").val(response.name);
									$("#change_studentnumber").val(response.studentnumber);
									$("#change_email").val(response.email);
									$("#change_phone").val(response.phone);
									$("#change_qq").val(response.qq);
									$("#change_major").val(response.major);
									$("#change_hometown").val(response.hometown);
								},
								error: function (err){
									alert(err);
								}
							})
						}
				}
			}
			//go div显隐end

			//			//echarts start使用echarts展示报名进度条
			//			var myChart = echarts.init(document.getElementById('index'));
			//			var option = {
			//				tooltip: {
			//					trigger: 'item',
			//					formatter: "{a} <br/>{b} : {c} ({d}%)"
			//				},
			//				legend: {
			//					orient: 'vertical',
			//					x: 'left',
			//					data: ['报名进度']
			//				},
			//				toolbox: {
			//					show: true,
			//					feature: {
			//						mark: {
			//							show: true
			//						},
			//						dataView: {
			//							show: true,
			//							readOnly: false
			//						},
			//						magicType: {
			//							show: true,
			//							type: ['pie', 'funnel'],
			//							option: {
			//								funnel: {
			//									x: '25%',
			//									width: '50%',
			//									funnelAlign: 'center',
			//									max: 1548
			//								}
			//							}
			//						},
			//						restore: {
			//							show: true
			//						},
			//						saveAsImage: {
			//							show: true
			//						}
			//					}
			//				},
			//				calculable: true,
			//				series: [{
			//					name: '报名进度',
			//					type: 'pie',
			//					radius: ['50%', '70%'],
			//					itemStyle: {
			//						normal: {
			//							label: {
			//								show: false
			//							},
			//							labelLine: {
			//								show: false
			//							}
			//						},
			//						emphasis: {
			//							label: {
			//								show: true,
			//								position: 'center',
			//								textStyle: {
			//									fontSize: '30',
			//									fontWeight: 'bold'
			//								}
			//							}
			//						}
			//					},
			//					data: [{
			//						value: 335,
			//						name: '报名进度'
			//					}, ]
			//				}]
			//			};// 使用刚指定的配置项和数据显示图表。
			//      myChart.setOption(option);
			//      //echarts end
		</script>
	</body>

</html>